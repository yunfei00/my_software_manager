{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h4>项目管理</h4>
  <form class="mb-3">
    <input type="text" name="keyword" value="{{ keyword }}" placeholder="搜索项目名称" class="form-control w-25 d-inline">
    <button type="submit" class="btn btn-primary">搜索</button>
    <a href="{% url 'projects:add' %}" class="btn btn-success float-end">新增项目</a>
  </form>

  <table class="table table-striped">
    <thead><tr><th>名称</th><th>负责人</th><th>状态</th><th>操作</th></tr></thead>
    <tbody>
      {% for p in projects %}
      <tr>
        <td>{{ p.name }}</td>
        <td>{{ p.owner.username }}</td>
        <td>{{ p.get_status_display }}</td>
        <td>
          <a href="{% url 'projects:edit' p.id %}" class="btn btn-sm btn-warning">编辑</a>
          <a href="{% url 'projects:delete' p.id %}" class="btn btn-sm btn-danger" onclick="return confirm('确认删除？')">删除</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
